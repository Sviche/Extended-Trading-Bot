"""
Extended Bot - Settings and Configuration
"""

# === Торговые настройки ===
TRADING_SETTINGS = {
    # Режим торговли
    'order_mode': 'MARKET',  # LIMIT или MARKET, за LIMIT сыпят оч мало поинтов
    # LIMIT: Экономия комиссий, медленнее, retry логика
    # MARKET: Быстрый фарм объема, моментальное исполнение, выше комиссии (~0.05%)

    'markets': ['BTC', 'ETH'],  # Список монет для торговли (без -USD)

    # Настройки пачек аккаунтов
    'batch_size_range': [3, 3],  # Диапазон количества аккаунтов в пачке [min, max]
    'long_accounts_range': [1, 1],  # Количество лонг-аккаунтов в пачке [min, max]
    # ВАЖНО: Количество шортов = total_accounts - long_accounts
    # Пример: 6 аккаунтов, 2 лонга => 4 шорта (лонги ≠ шорты ✓)

    'batch_size_usd': [1000, 1200],  # Диапазон размера ВСЕЙ ПАЧКИ в USD [min, max]
    # Лонги делят между собой половину, шорты - вторую половину (для хеджирования)
    # ВАЖНО: С учетом leverage 10x, для позиции $10 нужен маржин $1
    # При batch_size=30: половина=15, лонг=15 (маржин $1.5), шорт=7.5 каждый (маржин $0.75)
    # При batch_size=50: половина=25, лонг=25 (маржин $2.5), шорт=12.5 каждый (маржин $1.25)

    # Рандомизация размеров ордеров (анти-сибил)
    'order_size_variation': [0.1, 0.4],  # Диапазон отклонения размера от среднего [min, max]
    # Пример: batch_size=120, 2 лонга, 3 шорта, variation=0.1-0.4
    # Лонги: $60 всего → один ~$36, другой ~$24 (отклонение 20%)
    # Шорты: $60 всего → $15, $20, $25 (разные отклонения)
    # Сумма лонгов = сумма шортов = batch_size/2 ✓

    'leverage': {
        'BTC': 50,
        'ETH': 50,
        'SOL': 15,
    },

    # === Настройки для режима LIMIT (используются только при order_mode='LIMIT') ===
    'limit_order_offset_percent': 0.0001,  # 0.01% от цены для лимитных ордеров (только LIMIT режим)
    'use_adaptive_offset': True,           # Автоматически уменьшать offset если спред узкий (только LIMIT режим)

    # Таймауты и retry (только LIMIT режим)
    'order_execution_timeout': 100,  # Ждать открытия позиции (сек) (только LIMIT режим)
    'position_close_timeout': 100,   # Ждать закрытия позиции (сек) (только LIMIT режим)
    'max_open_retries': 5,           # Макс попыток открытия позиции (только LIMIT режим)
    'max_close_retries': 5,          # Макс попыток закрытия позиции (только LIMIT режим)
    'max_batch_retries': 300,        # Макс попыток открытия всего батча при частичном успехе (только LIMIT режим)

    # Воркеры
    'num_workers': 1,                      # Количество параллельных воркеров (3-5 оптимально)
    'account_cooldown_range': [60, 150],  # Время отдыха аккаунта после сделки [min, max] (сек)
    'generation_interval': 5.0,            # Интервал создания новых батчей (секунды)
    'max_queue_size': 10,                  # Максимальный размер очереди задач
    'max_consecutive_errors': 5,           # Макс последовательных ошибок до отключения аккаунта
}

# === Управление позициями ===
POSITION_MANAGEMENT = {
    'holding_time_range': [60, 200],  # Время удержания позиции [min, max] (сек)
    'monitor_interval_sec': 200,      # Проверка позиций каждые N сек
}

# === Задержки ===
DELAYS = {
    'between_orders': [3, 5],    # Задержка между ордерами [min, max] (сек)
    'between_accounts': [3, 5],  # Задержка между аккаунтами [min, max] (сек)
    'on_error': 60,              # Задержка при ошибке (сек)
}

# === Логирование ===
LOG_SETTINGS = {
    'level': 'INFO',      # DEBUG, INFO, WARNING, ERROR
    'file_max_mb': 100,   # Максимальный размер лог-файла (МБ)
    'stats_interval_sec': 300,  # Интервал вывода статистики оркестратора (сек)
}
